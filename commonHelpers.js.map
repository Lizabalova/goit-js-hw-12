{"version":3,"file":"commonHelpers.js","sources":["../src/js/pixabay-api.js","../src/js/render-functions.js","../src/main.js"],"sourcesContent":["import { form, page, input } from '../main';\nimport axios from \"axios\";\n\nexport let limit = 15;\n\nexport async function fetchPhotoFromPixabay() {\n    let inputValueForForm;\n    if (page === 1) {\n        const inputSearch = form.elements.search;\n        inputValueForForm = inputSearch.value.trim().split(' ').join('+');\n    } else {\n        inputValueForForm = input.trim().split(' ').join('+');\n    }\n    const searchParams = new URLSearchParams({\n        key: '42996639-9210c4b9e8937070da12bf768',\n        q: [inputValueForForm],\n        image_type: \"photo\",\n        orientation: \"horizontal\",\n        safesearch: true,\n        page: [page],\n        per_page: [limit]\n    });\n    const response = await axios.get(`https://pixabay.com/api/?${searchParams}`);\n    return response.data;\n}\n\n\n","import SimpleLightbox from \"simplelightbox\";\nimport \"simplelightbox/dist/simple-lightbox.min.css\";\n\nexport const listOfPhotos = document.querySelector('.gallery');\nconst lightbox = new SimpleLightbox('.gallery a', {\n    captionsData: 'alt',\n    captionDelay: 250\n});\n\nexport function renderPhotos(arr) {\n        const markup = arr.map(({ largeImageURL, webformatURL, tags, likes, views, comments, downloads }) => {\n            return `<li class=\"photos-list-item\">\n            <a class=\"photos-list-link\" href=\"${largeImageURL}\">\n            <img class=\"photo\" src=\"${webformatURL}\" alt=\"${tags}\"/>\n            </a>\n            <ul class=\"photo-information-container\">\n            <li class=\"item-photo-information-container\"><p><span class=\"accent\">Likes</span></br>${likes}</p></li>\n            <li class=\"item-photo-information-container\"><p><span class=\"accent\">Views</span></br>${views}</p></li>\n            <li class=\"item-photo-information-container\"><p><span class=\"accent\">Comments</span></br>${comments}</p></li>\n            <li class=\"item-photo-information-container\"><p><span class=\"accent\">Downloads</span></br>${downloads}</p></li>\n            </ul>\n            </li>`;\n        })\n            .join(\"\");\n        listOfPhotos.insertAdjacentHTML(\"beforeend\", markup);\n        lightbox.refresh();\n}","import iziToast from \"izitoast\";\nimport \"izitoast/dist/css/iziToast.min.css\";\nimport { fetchPhotoFromPixabay, limit } from './js/pixabay-api';\nimport { renderPhotos, listOfPhotos } from './js/render-functions';\n\nexport const form = document.querySelector('.search-form');\nexport let page = 1;\nexport let input = '';\nconst nextPageBtn = document.querySelector('.next-page-btn');\nconst preloader = document.querySelector('.loader');\nconst noMoreImagesMsg = document.querySelector('.no-more-images');\n\nhideElement(nextPageBtn);\nhideElement(noMoreImagesMsg);\nhideElement(preloader);\n\nlet totalPages = 1;\n\nwindow.onload = handleLoad;\n\nform.addEventListener('submit', handleSendForm);\nnextPageBtn.addEventListener('click', handleNextPage);\n\nfunction handleSendForm(evt) {\n    evt.preventDefault();\n    listOfPhotos.innerHTML = \"\";\n    const newInput = evt.target.elements.search.value.trim();\n    if (newInput !== '') {\n        page = 1;\n        input = newInput;\n        handleSubmit();\n    } else {\n        iziToast.show({\n            message: 'Please complete the field!',\n            theme: 'dark',\n            progressBarColor: '#FFFFFF',\n            color: '#EF4040',\n            position: 'topRight',\n        });\n    }\n}\n\nasync function handleSubmit() {\n    try {\n        hideElement(nextPageBtn);\n        hideElement(noMoreImagesMsg);\n        showElement(preloader);\n        if (page <= totalPages) {\n            const photoFromPixabay = await fetchPhotoFromPixabay();\n            if (photoFromPixabay.totalHits != 0) {\n                totalPages = Math.ceil(photoFromPixabay.totalHits / limit);\n                renderPhotos(photoFromPixabay.hits);\n                const itemOfList = listOfPhotos.querySelector('.photos-list-item');\n                const domRect = itemOfList.getBoundingClientRect();\n                window.scrollBy({\n                    top: domRect.height * 2,\n                    behavior: \"smooth\",\n                });\n                if (page < totalPages) {\n                    showElement(nextPageBtn);\n                }\n                else {\n                    showElement(noMoreImagesMsg);\n                }\n            } else {\n                iziToast.error({\n                    message: 'Sorry, there are no images matching your search query. Please try again!',\n                    theme: 'dark',\n                    progressBarColor: '#FFFFFF',\n                    color: '#EF4040',\n                    position: 'topRight',\n                });\n            }\n        }\n    } catch (error) {\n        console.log(error);\n        iziToast.error({\n            message: `${error.message}`,\n            theme: 'dark',\n            progressBarColor: '#FFFFFF',\n            color: '#EF4040',\n            position: 'topRight',\n        });\n    } finally {\n        hideElement(preloader);\n        handleLoad();\n        form.reset();\n    }\n}\n\nfunction handleNextPage() {\n    ++page;\n    handleSubmit();\n}\n\nfunction showElement(element) {\n    element.classList.remove('hidden');\n    element.style.display = 'block';\n}\n\nfunction hideElement(element) {\n    element.classList.add('hidden');\n    element.style.display = 'none';\n}\n\nfunction handleLoad() {\n    document.body.classList.add('loaded');\n    document.body.classList.remove('loaded_hiding');\n}\n"],"names":["limit","fetchPhotoFromPixabay","inputValueForForm","page","form","input","searchParams","axios","listOfPhotos","lightbox","SimpleLightbox","renderPhotos","arr","markup","largeImageURL","webformatURL","tags","likes","views","comments","downloads","nextPageBtn","preloader","noMoreImagesMsg","hideElement","totalPages","handleLoad","handleSendForm","handleNextPage","evt","newInput","handleSubmit","iziToast","showElement","photoFromPixabay","domRect","error","element"],"mappings":"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"}